<html>
    <head>
        <meta name='viewport'
            content='width=device-width, initial-scale=1'
        />
        <title>A.N.S.W.E.R.</title>
        <link rel='stylesheet'
            href='https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp'
        />
        <link rel='stylesheet'
            href='https://unpkg.com/leaflet@1.9.4/dist/leaflet.css'
            integrity='sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY='
            crossorigin='http://localhost:3000'
        />
        <link rel='stylesheet' href='/index.css' />
        <script src='https://accounts.google.com/gsi/client' async></script>
        <script>
            function gsiDecode(token) {
                ; (token = token
                    .split('.')[1]
                    .replace(/-/g, '+') // :( -> :)
                    .replace(/_/g, '/'))
                token = atob(token) // base64 decode
                token = token.split('').map(character => {
                    const hexCode = character.charCodeAt(0).toString(16)
                    return `%${`00${hexCode}`.slice(-2)}`
                }).join('')
                token = decodeURIComponent(token)
                return JSON.parse(token)
            }
            function onSwig(response) {
                console.log(response)
                const payload = gsiDecode(response.credential)
                console.log(JSON.stringify(payload, undefined, 4))
            }
        </script>
        <script
            src='https://unpkg.com/leaflet@1.9.4/dist/leaflet.js'
            integrity='sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo='
            crossorigin='http://localhost:3000'
        ></script>
        <script type='module' src='/index.js'></script>
    </head>
    <body>
        <div id='not-modal'>
            <div class='menu'>
                <div class='title'>A.N.S.W.E.R.</div>
                <div class='subtitle'>
                    A Network of<br />
                    Survival, Welfare, and<br />
                    Essential Resources
                </div>
                <div class='cta' id='menu-cta'></div>
            </div>
            <div class='map-container'>
                <div id='map'></div>
            </div>
        </div>
        <div id='modal'></div>
        <div id='g_id_onload'
            data-auto_prompt='false'
            data-login_uri='http://localhost:3000/api/sessions/google'
            data-client_id='126168465185-0d0uhll9mjtu0cmqt9c5vnlm020bp5j6.apps.googleusercontent.com'
        ></div>
    </body>
</html>